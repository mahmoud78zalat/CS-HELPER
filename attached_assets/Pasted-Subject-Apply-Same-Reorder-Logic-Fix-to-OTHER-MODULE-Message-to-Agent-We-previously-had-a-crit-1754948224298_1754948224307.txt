Subject: Apply Same Reorder Logic Fix to [OTHER MODULE]

Message to Agent:

We previously had a critical issue where drag-and-drop reordering in Call Scripts Manager and Store Contacts Manager showed a success message but did not actually update order_index in Supabase.

Here’s the root cause and fix that worked, which you should now apply to [OTHER MODULE]:

Root Cause
The reorder API endpoints existed (/api/call-scripts/reorder, /api/store-emails/reorder) but were not actually registered in the server because server/index.ts was importing routes from simple-routes.ts instead of routes.ts.

As a result, the drag-and-drop actions were being handled locally only (UI state updated), but no backend persistence occurred.

When requests did get sent, the dev server sometimes intercepted them, returning HTML instead of JSON.

Steps Taken to Fix
Checked the frontend

Located drag-and-drop logic in CallScriptsAdminManager.tsx and StoreContactsAdminManager.tsx.

Verified it was calling reorder endpoints.

Checked the backend

Confirmed reorder routes existed in server/routes.ts but weren’t registered because index.ts was importing simple-routes.ts (which lacked them).

Fixed the import in server/index.ts to load routes from routes.ts.

Verified storage layer

Checked supabase-storage.ts to ensure updateCallScript and updateStoreEmail correctly updated order_index.

Tested API directly

Used curl to send PATCH requests with real UUIDs from the DB.

Verified changes persisted in Supabase.

Restarted server

Once routes were loaded properly, drag-and-drop reordered items in the UI and persisted correctly for all users.

What You Need to Do for [OTHER MODULE]:
Find the reorder logic in the frontend for [OTHER MODULE].

Confirm it calls a valid backend reorder endpoint.

Ensure that endpoint is actually registered in server/index.ts.

If missing, add it to routes.ts and import routes.ts in index.ts.

Verify the backend update function modifies order_index in Supabase.

Test with real UUIDs via curl to confirm persistence before finalizing.